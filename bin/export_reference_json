#!/usr/bin/env ruby

require 'dfe/reference_data'

require 'dfe/reference_data/demo'
require 'dfe/reference_data/degrees/types'
require 'dfe/reference_data/degrees/types2'
require 'dfe/reference_data/degrees/subjects'
require 'dfe/reference_data/degrees/institutions'

env = Kernel.binding

require 'json'

if ARGV.empty?
  puts 'USAGE: export_reference_json <list-expression>'
else
  list_expression = ARGV[-1]

  puts '// Auto generated file - do not edit'
  puts "// Generated by export_reference_json #{list_expression}"

  puts JSON.pretty_generate(env.eval(list_expression))
end
